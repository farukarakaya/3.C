<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

   <h:head>
       <style type="text/css">
           #map {
               height: 100%;
               width: 100%;
           }
       </style>
       <script type="text/javascript" src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"/>
       <script  type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCSSCWTUs22Y7P48TIct292Esi-iBXujw" />
       <script type="text/javascript" src="js/map.js"/>
   </h:head>

     <h:body>
      <p:layout fullPage="true">
         <p:layoutUnit position="north"  size="250"  >
             <p:graphicImage value="images/banner.png" style="float: left; width: 80%" />
             <p:outputPanel style="float: right">
                 <h:form>
                 <p:menu value="Options" rendered="#{sessionView.loggedIn}">
                     <p:menuitem value="Update" actionListener="#{menuView.dummy}" update="" icon="ui-icon-arrowrefresh-1-w"/>
                     <p:menuitem value="Delete" actionListener="#{menuView.dummy}" ajax="false" icon="ui-icon-close"/>
                     <p:menuitem value="Delete" actionListener="#{menuView.dummy}" ajax="false" icon="ui-icon-close"/>
                     <p:menuitem value="Delete" actionListener="#{menuView.dummy}" ajax="false" icon="ui-icon-close"/>
                     <p:menuitem value="Delete" actionListener="#{menuView.dummy}" ajax="false" icon="ui-icon-close"/>
                     <p:separator/>
                     <p:menuitem value="Homepage" url="http://www.primefaces.org" icon="ui-icon-extlink"/>
                 </p:menu>
                 </h:form>
             </p:outputPanel>
             <h:form>
                 <p:remoteCommand name="sendCity" process="@this" update="DistrictFilter" action="#{filterView.setCity}"/>
                 <p:remoteCommand name="sendDistrict" process="@this"  action="#{filterView.setDistrict}"/>
                 <p:remoteCommand name="sendDType" process="@this"  action="#{filterView.setType}"/>
             </h:form>
             <p:panelGrid columns="4" cellpadding="1">
                 <p:selectOneMenu id="CityFilter" widgetVar="CityFilter" value="#{filterView.city}" style="width:125px" filter="true" filterMatchMode="startsWith">
                     <f:selectItem itemLabel="Select City"  itemValue="" />
                     <f:selectItems value="#{filterView.cities}" var="city" itemValue="#{city}" />
                     <p:ajax event="change" oncomplete="sendSelectedCity(value)"/>
                 </p:selectOneMenu>
                 <p:selectOneMenu disabled="#{filterView.citySelected}" id="DistrictFilter" value="#{filterView.district}" filter="true" filterMatchMode="startsWith" style="width:125px">
                    <f:selectItem  itemLabel="Select District" itemValue="" />
                    <f:selectItems value="#{filterView.districts}" />
                    <p:ajax event="change" oncomplete="sendSelectedDistrict(value)"/>
                 </p:selectOneMenu>
                 <p:selectOneMenu  id="TypeFilter" value="#{filterView.typeSelected}" filter="true" filterMatchMode="startsWith" style="width:125px">
                     <f:selectItem  itemLabel="Select Type" itemValue="" />
                     <f:selectItems value="#{filterView.types}" />
                     <p:ajax event="change" oncomplete="sendSelectedType(value)"/>
                 </p:selectOneMenu>
                 <p:selectManyCheckbox id="basic" value="#{filterView.needDonation}">
                     <f:selectItem itemLabel="Donation" itemValue="Donation" />
                     <f:selectItem itemLabel="Need" itemValue="Need" />
                 </p:selectManyCheckbox>
             </p:panelGrid>
         </p:layoutUnit>
         <p:layoutUnit position="east" size="400">
                 <p:dataScroller value="#{dataScrollerView.announcements}" var="announcement" chunkSize="10" mode="inline"
                                 scrollHeight="400">
                     <h:panelGrid columns="2" style="width:100%" columnClasses="logo,detail">
                         <p:graphicImage value="images/embed2.jpg" width="120" height="100"/>
                         <p:outputPanel>
                             <h:form>
                                 <p:remoteCommand name="sendID" process="@this" oncomplete="PF('announcementPopup').show()"
                                                 update="announcementPopup" action="#{mapView.setAnnouncementToShow}" />
                             </h:form>
                             <h:panelGrid columns="1" cellpadding="2">
                                 <h:outputText value="#{announcement.title}" style="font-weight: bold"/>

                                 <h:outputText value="#{announcement.id}" style="font-weight: bold"/>

                                 <p:commandButton value="Show" id="scrollbutton"  onclick="clickAnnouncement(#{announcement.id})"/>

                             </h:panelGrid>
                         </p:outputPanel>
                     </h:panelGrid>
                     <p:separator />
                 </p:dataScroller>
         </p:layoutUnit>
         <p:layoutUnit position="center" value='10' >
             <input type="hidden" name="filter" value='10' />
             <div id="map" >
                 <script type="text/javascript">
                     getAnnouncements(#{mapView.announcementsMap});
                     initMap();
                 </script>
                 <p:dialog header="#{mapView.getAnnouncememtByID().title}" id="announcementPopup" widgetVar="announcementPopup"
                           showEffect="drop" hideEffect="drop" resizable="false" dynamic="true" closeOnEscape="true" position="150,250" >
                     <p:graphicImage value="images/embed2.jpg" width="240" height="200" style="float: left"/>
                     <h:panelGrid columns="1" style="margin-bottom:10px; float: left" cellpadding="5">
                         <h:outputText value="#{mapView.getAnnouncememtByID().detail}" style="font-weight: mormal"/>
                         <h:outputText rendered="#{sessionView.loggedIn}" value="#{mapView.getAnnouncememtByID().contactInfo}" style="font-weight: mormal"/>
                     </h:panelGrid>
                 </p:dialog>
             </div>
         </p:layoutUnit>
         <p:layoutUnit position="south" size="50">
              Bottom
         </p:layoutUnit>
      </p:layout>
     </h:body>

</html>
